#!/usr/bin/env bash

if [ -f "`pwd`/DOTFILE" ]; then
  echo "DOTFILE exits"
  source "`pwd`/DOTFILE"
  echo $DOTFILESPATH
else
  echo "DOTFILE not exits"
  echo "exec: rake install"
  exit
fi

if [ -n "${DOTFILESPATH+x}" ]; then
  export DOTFILE=$DOTFILESPATH
else
  echo "DOTFILESPATH not exits"
  exit
fi
echo "DOTFILES Path: ${DOTFILE}"
echo "HOME Path: ${HOME}"

mv $HOME/.bashrc $HOME/.bashrc.bak
rm $HOME/.bashrc
mv $HOME/.bash_profile $HOME/.bash_profile.bak
rm $HOME/.bash_profile
mv $HOME/.gitconfig $HOME/.gitconfig.bak
mv $HOME/Brewfile $HOME/Brewfile.bak


ln -nfsv "$DOTFILE/DOTFILE" $HOME/.DOTFILE
ln -nfsv "$DOTFILE/bashrc" $HOME/.bash_profile
ln -nfsv "$DOTFILE/bashrc" $HOME/.bashrc
ln -nfsv "$DOTFILE/gitconfig" $HOME/.gitconfig
ln -nfsv "$DOTFILE/pryrc.yml" $HOME/.pryrc.yml
ln -nfsv "$DOTFILE/Brewfile" $HOME/Brewfile

#Atom
mv $HOME/.atom $HOME/.atom.bak
ln -nfsv "$HOME/Dropbox/settings/atom" $HOME/.atom

#ruby-rails
mv $HOME/.pryrc $HOME/.pryrc.bak
ln -nfsv "$DOTFILE/pryrc" $HOME/.pryrc

#vim
mv $HOME/.vimrc $HOME/.vimrc.bak
mv $HOME/.gvimrc $HOME/.gvimrc.bak

ln -nfsv "$DOTFILE/vim/vimrc" $HOME/.vimrc
ln -nfsv "$DOTFILE/vim/gvimrc" $HOME/.gvimrc
ln -nfsv "$DOTFILE/vim/dot_vim" $HOME/.vim

echo "fertig set_links"

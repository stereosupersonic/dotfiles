#!/usr/bin/env sh

if [ -f DOTFILE ]; then
  echo "DOTFILE exits" 
  source DOTFILE
  echo $DOTFILESPATH
 
else
  echo "DOTFILE not exits"  
  echo "exec: rake install"  
  exit
fi   

if [ -z "$DOTFILESPATH" ]; then 
  export DOTFILE=$DOTFILESPATH 
else
  echo "DOTFILESPATH not exits"  
  exit
fi   
echo "DOTFILES Path: ${DOTFILE}"
echo "HOME Path: ${HOME}"   

mv ~/.bashrc ~/.bashrc.bak 
rm ~/.bashrc
mv ~/.bash_profile ~/.bash_profile.bak 
rm ~/.bash_profile  
mv ~/.gitconfig ~/.gitconfig.bak

ln -nfsv "$DOTFILE/DOTFILE" ~/.DOTFILE   
ln -nfsv "$DOTFILE/bashrc" ~/.bash_profile
ln -nfsv "$DOTFILE/bashrc" ~/.bashrc
ln -nfsv "$DOTFILE/gitconfig" ~/.gitconfig

#ruby-rails
mv ~/.irbrc ~/.irbrc.bak
mv ~/.railsconsolerc ~/.railsconsolerc.bak
mv ~/.railsrc ~/.railsrc.bak
mv ~/.autotest ~/.railsrc.bak
mv ~/.rdebugrc  ~/.rdebugrc.bak
mv ~/.tmux.conf  ~/.tmux_conf.bak

ln -nfsv "$DOTFILE/irbrc" ~/.irbrc
ln -nfsv "$DOTFILE/railsrc" ~/.railsrc
ln -nfsv "$DOTFILE/railsconsolerc" ~/.railsconsolerc
ln -nfsv "$DOTFILE/autotest" ~/.autotest
ln -nfsv "$DOTFILE/rdebugrc" ~/.rdebugrc
ln -nfsv "$DOTFILE/tmuxconf" ~/.tmux.conf

#Install vim
mv ~/.vimrc ~/.vimrc.bak
mv ~/.gvimrc ~/.gvimrc.bak

ln -nfsv "$DOTFILE/vim/vimrc" ~/.vimrc
ln -nfsv "$DOTFILE/vim/gvimrc" ~/.gvimrc
ln -nfsv "$DOTFILE/vim/dot_vim" ~/.vim   

echo "fertig set_links" 